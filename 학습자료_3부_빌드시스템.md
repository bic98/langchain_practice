# OpenAI Apps SDK ì™„ë²½ í•™ìŠµ ê°€ì´ë“œ - 3ë¶€: ë¹Œë“œ ì‹œìŠ¤í…œ

## ğŸ“š ëª©ì°¨
1. [Vite ë¹Œë“œ ì‹œìŠ¤í…œ ì´í•´í•˜ê¸°](#1-vite-ë¹Œë“œ-ì‹œìŠ¤í…œ-ì´í•´í•˜ê¸°)
2. [ê°œë°œ ì„œë²„ êµ¬ì¡° (vite.config.mts)](#2-ê°œë°œ-ì„œë²„-êµ¬ì¡°-viteconfigmts)
3. [í”„ë¡œë•ì…˜ ë¹Œë“œ (build-all.mts)](#3-í”„ë¡œë•ì…˜-ë¹Œë“œ-build-allmts)
4. [CSS ì²˜ë¦¬ ì „ëµ](#4-css-ì²˜ë¦¬-ì „ëµ)
5. [í•´ì‹±ê³¼ ìºì‹± ì „ëµ](#5-í•´ì‹±ê³¼-ìºì‹±-ì „ëµ)

---

## 1. Vite ë¹Œë“œ ì‹œìŠ¤í…œ ì´í•´í•˜ê¸°

### 1.1 Viteë€?

**Vite**(ë¹„íŠ¸)ëŠ” ì°¨ì„¸ëŒ€ í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ë„êµ¬ì…ë‹ˆë‹¤.

**ê¸°ì¡´ ë„êµ¬ (Webpack) ë¬¸ì œì :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê°œë°œ ì„œë²„ ì‹œì‘ ì‹œ                    â”‚
â”‚  ëª¨ë“  íŒŒì¼ì„ ë²ˆë“¤ë§                   â”‚
â”‚  â±ï¸ 30ì´ˆ~1ë¶„ ì†Œìš”                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Viteì˜ í•´ê²°ì±…:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê°œë°œ ì„œë²„ ì¦‰ì‹œ ì‹œì‘                  â”‚
â”‚  í•„ìš”í•œ íŒŒì¼ë§Œ ë³€í™˜                   â”‚
â”‚  â±ï¸ 1ì´ˆ ì´ë‚´                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ íŠ¹ì§•:**

1. **ë¹ ë¥¸ ê°œë°œ ì„œë²„**
   - ES ëª¨ë“ˆì„ ë„¤ì´í‹°ë¸Œë¡œ ì‚¬ìš©
   - ë³€ê²½ëœ íŒŒì¼ë§Œ ë‹¤ì‹œ ë¡œë“œ (HMR)

2. **ìµœì í™”ëœ í”„ë¡œë•ì…˜ ë¹Œë“œ**
   - Rollup ê¸°ë°˜ ë²ˆë“¤ë§
   - ì½”ë“œ ë¶„í• , Tree-shaking

3. **í”ŒëŸ¬ê·¸ì¸ ìƒíƒœê³„**
   - React, Vue, Svelte ë“± ì§€ì›
   - TypeScript ê¸°ë³¸ ì§€ì›

### 1.2 ê°œë°œ ëª¨ë“œ vs í”„ë¡œë•ì…˜ ëª¨ë“œ

```javascript
// ê°œë°œ ëª¨ë“œ
pnpm dev
// â†’ ë³€í™˜ ì—†ì´ ES ëª¨ë“ˆ ê·¸ëŒ€ë¡œ ì œê³µ
// â†’ ë¹ ë¥¸ ì‹œì‘, ë¹ ë¥¸ HMR

// í”„ë¡œë•ì…˜ ëª¨ë“œ
pnpm build
// â†’ ëª¨ë“  íŒŒì¼ì„ ë²ˆë“¤ë§
// â†’ ìµœì†Œí™”, ì••ì¶•, ìµœì í™”
```

**ì°¨ì´ì :**

| | ê°œë°œ ëª¨ë“œ | í”„ë¡œë•ì…˜ ëª¨ë“œ |
|---|-----------|---------------|
| **ëª©ì ** | ë¹ ë¥¸ ê°œë°œ | ìµœì í™”ëœ ë°°í¬ |
| **ì†ë„** | ì¦‰ì‹œ ì‹œì‘ | ëŠë¦¼ (ë²ˆë“¤ë§) |
| **íŒŒì¼ í¬ê¸°** | í¼ | ì‘ìŒ (ì••ì¶•) |
| **ì†ŒìŠ¤ë§µ** | ìƒì„¸ | ê°„ë‹¨ ë˜ëŠ” ì—†ìŒ |
| **ì—ëŸ¬ ë©”ì‹œì§€** | ìƒì„¸ | ìµœì†Œí™” |

---

## 2. ê°œë°œ ì„œë²„ êµ¬ì¡° (vite.config.mts)

### 2.1 ì„¤ì • íŒŒì¼ ì „ì²´ êµ¬ì¡°

```typescript
// vite.config.mts
import { defineConfig, type Plugin } from "vite";
import react from "@vitejs/plugin-react";
import fg from "fast-glob";
import tailwindcss from "@tailwindcss/vite";

export default defineConfig({
  plugins: [
    tailwindcss(),
    react(),
    multiEntryDevEndpoints({ entries: inputs })
  ],
  server: { /* ... */ },
  build: { /* ... */ }
});
```

### 2.2 ì…ë ¥ íŒŒì¼ ìë™ ë°œê²¬

```typescript
function buildInputs() {
  // src/**/index.{tsx,jsx} íŒŒì¼ë“¤ ì°¾ê¸°
  const files = fg.sync("src/**/index.{tsx,jsx}", { dot: false });

  // íŒŒì¼ ê²½ë¡œ â†’ ìœ„ì ¯ ì´ë¦„ ë§¤í•‘
  return Object.fromEntries(
    files.map((f) => [
      path.basename(path.dirname(f)),  // ë””ë ‰í† ë¦¬ ì´ë¦„
      path.resolve(f)                  // ì ˆëŒ€ ê²½ë¡œ
    ])
  );
}

// ê²°ê³¼:
// {
//   "pizzaz": "/home/user/project/src/pizzaz/index.jsx",
//   "todo": "/home/user/project/src/todo/index.jsx",
//   "solar-system": "/home/user/project/src/solar-system/index.jsx"
// }
```

**ì™œ ìë™ìœ¼ë¡œ ì°¾ë‚˜ìš”?**
- ìƒˆ ìœ„ì ¯ì„ ì¶”ê°€í•  ë•Œ ì„¤ì • íŒŒì¼ ìˆ˜ì • ë¶ˆí•„ìš”
- `src/` ì•„ë˜ì— `index.jsx` ë§Œë“¤ë©´ ìë™ ì¸ì‹!

### 2.3 í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ

#### 2.3.1 Tailwind CSS í”ŒëŸ¬ê·¸ì¸

```typescript
plugins: [
  tailwindcss(),  // Tailwind CSS ì²˜ë¦¬
  // ...
]
```

**ë™ì‘:**
1. `.jsx` íŒŒì¼ì—ì„œ `className` ìŠ¤ìº”
2. ì‚¬ìš©ëœ í´ë˜ìŠ¤ë§Œ CSSë¡œ ë³€í™˜
3. ìµœì¢… CSS íŒŒì¼ ìƒì„±

**ì˜ˆì œ:**
```jsx
// ì†ŒìŠ¤ ì½”ë“œ
<div className="flex items-center gap-3 p-4">

// ìƒì„±ë˜ëŠ” CSS
.flex { display: flex; }
.items-center { align-items: center; }
.gap-3 { gap: 0.75rem; }
.p-4 { padding: 1rem; }
```

#### 2.3.2 React í”ŒëŸ¬ê·¸ì¸

```typescript
plugins: [
  react(),  // React JSX ë³€í™˜
  // ...
]
```

**ë™ì‘:**
1. JSX â†’ JavaScript ë³€í™˜
2. React Fast Refresh (HMR) ì„¤ì •
3. Development ëª¨ë“œ ìµœì í™”

**ë³€í™˜ ì˜ˆì œ:**
```jsx
// ì†ŒìŠ¤ ì½”ë“œ
function App() {
  return <div>Hello</div>;
}

// ë³€í™˜ í›„
import { jsx as _jsx } from "react/jsx-runtime";
function App() {
  return _jsx("div", { children: "Hello" });
}
```

#### 2.3.3 Multi-Entry í”ŒëŸ¬ê·¸ì¸ (ì»¤ìŠ¤í…€)

ì´ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤!

```typescript
function multiEntryDevEndpoints(options: {
  entries: Record<string, string>;
  globalCss?: string[];
  perEntryCssGlob?: string;
}): Plugin
```

**ëª©ì :** ì—¬ëŸ¬ ìœ„ì ¯ì„ ë™ì‹œì— ê°œë°œí•  ìˆ˜ ìˆê²Œ í•¨

**ì£¼ìš” ê¸°ëŠ¥:**

1. **ê°€ìƒ ì—”ë“œí¬ì¸íŠ¸ ìƒì„±**
```
http://localhost:4444/pizzaz.html
http://localhost:4444/todo.html
http://localhost:4444/solar-system.html
```

2. **HTML ìë™ ìƒì„±**
```typescript
const renderDevHtml = (name: string): string => `<!doctype html>
<html>
<head>
  <script type="module" src="/${name}.js"></script>
  <link rel="stylesheet" href="/${name}.css">
</head>
<body>
  <div id="${name}-root"></div>
</body>
</html>`;
```

3. **CSS ìë™ ìˆ˜ì§‘**
```typescript
// ê¸€ë¡œë²Œ CSS
const globalCss = ["src/index.css"];

// ìœ„ì ¯ë³„ CSS
const perEntryCss = fg.sync("**/*.{css,pcss}", {
  cwd: entryDir,
  ignore: ["**/*.module.*"]
});

// í•©ì¹˜ê¸°
const allCss = [...globalCss, ...perEntryCss];
```

### 2.4 ê°€ìƒ ëª¨ë“ˆ ì‹œìŠ¤í…œ

**ê°€ìƒ ëª¨ë“ˆì´ë€?**
- ì‹¤ì œ íŒŒì¼ì´ ì•„ë‹ˆë¼ **ë©”ëª¨ë¦¬ì—ë§Œ ì¡´ì¬**í•˜ëŠ” ëª¨ë“ˆ
- ë¹Œë“œ ë„êµ¬ê°€ ë™ì ìœ¼ë¡œ ìƒì„±

**ì´ í”„ë¡œì íŠ¸ì˜ ê°€ìƒ ëª¨ë“ˆ:**

```typescript
// ìš”ì²­: /pizzaz.js
// â†’ ê°€ìƒ ëª¨ë“ˆ ID: "\0multi-entry:entry:pizzaz"

// resolveId í›…
resolveId(id: string) {
  if (id.endsWith(".js")) {
    const name = id.slice(0, -3);
    if (entries[name]) {
      return `${V_PREFIX}entry:${name}`;  // ê°€ìƒ ID ë°˜í™˜
    }
  }
}

// load í›…
load(id: string) {
  if (id === "\0multi-entry:entry:pizzaz") {
    // ê°€ìƒ ëª¨ë“ˆ ë‚´ìš© ìƒì„±
    return `
      import "/@vite/client";              // HMR í´ë¼ì´ì–¸íŠ¸
      import "/pizzaz.css";                // CSS
      await import("/src/pizzaz/index.jsx");  // ì‹¤ì œ ì½”ë“œ
    `;
  }
}
```

**ì‹¤í–‰ íë¦„:**
```
ë¸Œë¼ìš°ì €: GET /pizzaz.js
    â†“
Vite: resolveId("/pizzaz.js")
    â†“
Vite: id = "\0multi-entry:entry:pizzaz"
    â†“
Vite: load("\0multi-entry:entry:pizzaz")
    â†“
Vite: ê°€ìƒ ëª¨ë“ˆ ë‚´ìš© ìƒì„±
    â†“
ë¸Œë¼ìš°ì €: JavaScript ì½”ë“œ ìˆ˜ì‹ 
```

### 2.5 ê°œë°œ ì„œë²„ ì„¤ì •

```typescript
server: {
  port: 4444,           // í¬íŠ¸ ë²ˆí˜¸
  strictPort: true,     // í¬íŠ¸ ì¶©ëŒ ì‹œ ì—ëŸ¬ (ë‹¤ë¥¸ í¬íŠ¸ë¡œ ì•ˆ ë°”ê¿ˆ)
  cors: true            // CORS í—ˆìš©
}
```

**CORSê°€ ì™œ í•„ìš”í•œê°€?**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ChatGPT (ë‹¤ë¥¸ ë„ë©”ì¸)   â”‚
â”‚  chat.openai.com        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ìœ„ì ¯ ë¡œë“œ ìš”ì²­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê°œë°œ ì„œë²„               â”‚
â”‚  localhost:4444         â”‚
â”‚  CORS í—ˆìš© âœ…            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

CORSê°€ ì—†ìœ¼ë©´:
```
âŒ Access to fetch at 'http://localhost:4444/pizzaz.html'
   from origin 'https://chat.openai.com' has been blocked by CORS policy
```

### 2.6 ë¯¸ë“¤ì›¨ì–´ ì‹œìŠ¤í…œ

**ë¯¸ë“¤ì›¨ì–´ë€?**
- HTTP ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜

```typescript
configureServer(server) {
  server.middlewares.use((req, res, next) => {
    const url = req.url.split("?")[0];

    // 1. ë£¨íŠ¸ ìš”ì²­ ì²˜ë¦¬
    if (url === "/" || url === "/index.html") {
      const html = renderIndexHtml(names);
      res.setHeader("Content-Type", "text/html");
      res.end(html);
      return;
    }

    // 2. ìœ„ì ¯ HTML ìš”ì²­ ì²˜ë¦¬
    if (url.match(/^\/?([\w-]+)\.html$/)) {
      const name = url.match(/^\/?([\w-]+)\.html$/)[1];
      if (entries[name]) {
        const html = renderDevHtml(name);
        res.end(html);
        return;
      }
    }

    // 3. ë‹¤ë¥¸ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ê¹€
    next();
  });
}
```

**ìš”ì²­ ì²˜ë¦¬ ìˆœì„œ:**
```
1. GET /
   â†’ renderIndexHtml() â†’ ìœ„ì ¯ ëª©ë¡ í˜ì´ì§€

2. GET /pizzaz.html
   â†’ renderDevHtml("pizzaz") â†’ ìœ„ì ¯ HTML

3. GET /pizzaz.js
   â†’ resolveId â†’ load â†’ ê°€ìƒ ëª¨ë“ˆ

4. GET /src/pizzaz/index.jsx
   â†’ Viteì˜ ê¸°ë³¸ ì²˜ë¦¬ (React ë³€í™˜)
```

---

## 3. í”„ë¡œë•ì…˜ ë¹Œë“œ (build-all.mts)

### 3.1 ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ íë¦„

```typescript
// build-all.mts
const entries = fg.sync("src/**/index.{tsx,jsx}");
const outDir = "assets";

// 1. assets í´ë” ì‚­ì œ
fs.rmSync(outDir, { recursive: true, force: true });

// 2. ê° ìœ„ì ¯ ë¹Œë“œ
for (const file of entries) {
  const name = path.basename(path.dirname(file));

  // CSS ìˆ˜ì§‘
  const cssToInclude = collectCss(file);

  // Vite ë¹Œë“œ
  await build(createConfig(name, file, cssToInclude));
}

// 3. íŒŒì¼ í•´ì‹±
hashOutputFiles();

// 4. HTML ìƒì„±
generateHtmlFiles();
```

### 3.2 CSS ìˆ˜ì§‘ ì „ëµ

**ì™œ CSSë¥¼ ìˆ˜ì§‘í•˜ë‚˜?**
- ê° ìœ„ì ¯ì´ **ë…ë¦½ì ì¸ ë²ˆë“¤**ì´ì–´ì•¼ í•¨
- ìœ„ì ¯ Aê°€ ìœ„ì ¯ Bì˜ CSSì— ì˜ì¡´í•˜ë©´ ì•ˆ ë¨

**ìˆ˜ì§‘ ë¡œì§:**
```typescript
const entryAbs = path.resolve(file);  // /project/src/pizzaz/index.jsx
const entryDir = path.dirname(entryAbs);  // /project/src/pizzaz

// 1. ê¸€ë¡œë²Œ CSS
const globalCss = ["src/index.css"].filter(p => fs.existsSync(p));

// 2. ìœ„ì ¯ë³„ CSS
const perEntryCss = fg.sync("**/*.{css,pcss,scss,sass}", {
  cwd: entryDir,           // src/pizzaz í´ë”ë§Œ ê²€ìƒ‰
  absolute: true,
  ignore: ["**/*.module.*"]  // CSS ëª¨ë“ˆ ì œì™¸
});

// 3. í•©ì¹˜ê¸° (ìˆœì„œ ì¤‘ìš”!)
const cssToInclude = [...globalCss, ...perEntryCss];
```

**ì˜ˆì œ:**
```
src/
â”œâ”€â”€ index.css                  # ëª¨ë“  ìœ„ì ¯ì— í¬í•¨
â”œâ”€â”€ pizzaz/
â”‚   â”œâ”€â”€ index.jsx
â”‚   â”œâ”€â”€ map.css               # pizzazë§Œ í¬í•¨
â”‚   â””â”€â”€ sidebar.css           # pizzazë§Œ í¬í•¨
â””â”€â”€ todo/
    â”œâ”€â”€ index.jsx
    â””â”€â”€ todo.css              # todoë§Œ í¬í•¨
```

**Pizzaz ë¹Œë“œ:**
```typescript
cssToInclude = [
  "/project/src/index.css",      // ê¸€ë¡œë²Œ
  "/project/src/pizzaz/map.css",
  "/project/src/pizzaz/sidebar.css"
]
```

### 3.3 ê°€ìƒ ë˜í¼ í”ŒëŸ¬ê·¸ì¸

**ë¬¸ì œ:** Viteì— CSS íŒŒì¼ ëª©ë¡ì„ ì–´ë–»ê²Œ ì „ë‹¬í• ê¹Œ?

**í•´ê²°:** ê°€ìƒ ë˜í¼ ëª¨ë“ˆ ìƒì„±!

```typescript
function wrapEntryPlugin(
  virtualId: string,      // "\0virtual-entry:/project/src/pizzaz/index.jsx"
  entryFile: string,      // "/project/src/pizzaz/index.jsx"
  cssPaths: string[]      // CSS íŒŒì¼ ëª©ë¡
): Plugin {
  return {
    name: `virtual-entry-wrapper:${entryFile}`,

    resolveId(id) {
      if (id === virtualId) return id;
    },

    load(id) {
      if (id !== virtualId) return null;

      // CSS import ë¬¸ ìƒì„±
      const cssImports = cssPaths
        .map(css => `import ${JSON.stringify(css)};`)
        .join("\n");

      // ê°€ìƒ ëª¨ë“ˆ ë‚´ìš©
      return `
        ${cssImports}
        export * from ${JSON.stringify(entryFile)};
        import * as __entry from ${JSON.stringify(entryFile)};
        export default (__entry.default ?? __entry.App);
        import ${JSON.stringify(entryFile)};
      `;
    }
  };
}
```

**ìƒì„±ë˜ëŠ” ê°€ìƒ ëª¨ë“ˆ:**
```javascript
import "/project/src/index.css";
import "/project/src/pizzaz/map.css";
import "/project/src/pizzaz/sidebar.css";

export * from "/project/src/pizzaz/index.jsx";

import * as __entry from "/project/src/pizzaz/index.jsx";
export default (__entry.default ?? __entry.App);

import "/project/src/pizzaz/index.jsx";
```

### 3.4 ë¹Œë“œ ì„¤ì •

```typescript
const createConfig = (): InlineConfig => ({
  plugins: [
    wrapEntryPlugin(virtualId, entryAbs, cssToInclude),
    tailwindcss(),
    react(),
    {
      name: "remove-manual-chunks",
      outputOptions(options) {
        // manualChunks ì œê±° â†’ ë‹¨ì¼ íŒŒì¼ë¡œ ë²ˆë“¤ë§
        delete (options as any).manualChunks;
      }
    }
  ],

  build: {
    target: "es2022",
    outDir: "assets",
    emptyOutDir: false,      // ë‹¤ë¥¸ ìœ„ì ¯ íŒŒì¼ ì‚­ì œ ì•ˆ í•¨
    minify: "esbuild",       // ì½”ë“œ ìµœì†Œí™”
    cssCodeSplit: false,     // CSSë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ

    rollupOptions: {
      input: virtualId,      // ê°€ìƒ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
      output: {
        format: "es",
        entryFileNames: `${name}.js`,
        inlineDynamicImports: true,  // ë™ì  importë„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ
        assetFileNames: (info) =>
          (info.name || "").endsWith(".css")
            ? `${name}.css`
            : `[name]-[hash][extname]`
      }
    }
  }
});
```

**ì£¼ìš” ì˜µì…˜ ì„¤ëª…:**

**1. `cssCodeSplit: false`**
```
âœ… ë‹¨ì¼ CSS íŒŒì¼:
assets/pizzaz.css  (ëª¨ë“  CSS í¬í•¨)

âŒ ë¶„í• ëœ CSS íŒŒì¼:
assets/pizzaz-chunk1.css
assets/pizzaz-chunk2.css
```

**2. `inlineDynamicImports: true`**
```javascript
// ì†ŒìŠ¤ ì½”ë“œ
const Component = await import('./Heavy.jsx');

// âŒ ë¶„í• ë¨
pizzaz.js
Heavy.js

// âœ… í•©ì³ì§
pizzaz.js (ëª¨ë“  ì½”ë“œ í¬í•¨)
```

**3. `entryFileNames: ${name}.js`**
```
ì¶œë ¥ íŒŒì¼ëª…ì„ ìœ„ì ¯ ì´ë¦„ìœ¼ë¡œ ì§€ì •
pizzaz.js (X pizzaz-a1b2c3d4.js)
```

### 3.5 ë¹Œë“œ ì‹¤í–‰

```typescript
for (const file of entries) {
  const name = path.basename(path.dirname(file));

  console.group(`Building ${name} (react)`);
  await build(createConfig());
  console.groupEnd();
}
```

**ë¹Œë“œ ê²°ê³¼:**
```
assets/
â”œâ”€â”€ pizzaz.js
â”œâ”€â”€ pizzaz.css
â”œâ”€â”€ todo.js
â”œâ”€â”€ todo.css
â”œâ”€â”€ solar-system.js
â””â”€â”€ solar-system.css
```

---

## 4. CSS ì²˜ë¦¬ ì „ëµ

### 4.1 Tailwind CSS ì‘ë™ ë°©ì‹

**1. ì†ŒìŠ¤ ì½”ë“œ ìŠ¤ìº”**
```typescript
// tailwind.config.ts
content: [
  "./src/**/*.{html,js,ts,jsx,tsx}",
]
```

Tailwindê°€ ì´ íŒŒì¼ë“¤ì„ ìŠ¤ìº”í•´ì„œ ì‚¬ìš©ëœ í´ë˜ìŠ¤ë¥¼ ì°¾ìŠµë‹ˆë‹¤.

**2. í´ë˜ìŠ¤ ì¶”ì¶œ**
```jsx
// src/pizzaz/index.jsx
<div className="flex items-center gap-3 p-4 rounded-lg bg-white">
  <span className="text-xl font-bold">Hello</span>
</div>
```

ì¶”ì¶œëœ í´ë˜ìŠ¤:
- `flex`
- `items-center`
- `gap-3`
- `p-4`
- `rounded-lg`
- `bg-white`
- `text-xl`
- `font-bold`

**3. CSS ìƒì„±**
```css
.flex { display: flex; }
.items-center { align-items: center; }
.gap-3 { gap: 0.75rem; }
.p-4 { padding: 1rem; }
.rounded-lg { border-radius: 0.5rem; }
.bg-white { background-color: #fff; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.font-bold { font-weight: 700; }
```

**4. ìµœì í™”**
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ëŠ” ì œì™¸
- í”„ë¡œë•ì…˜: ìµœì†Œí™” (ê³µë°± ì œê±°, ì••ì¶•)

### 4.2 CSS ì„í¬íŠ¸ ìˆœì„œ

**ì™œ ìˆœì„œê°€ ì¤‘ìš”í•œê°€?**
- CSSëŠ” **ë‚˜ì¤‘ì— ì„ ì–¸ëœ ê·œì¹™ì´ ìš°ì„ **
- ì˜ëª»ëœ ìˆœì„œ â†’ ìŠ¤íƒ€ì¼ ê¹¨ì§

**ì˜¬ë°”ë¥¸ ìˆœì„œ:**
```typescript
const cssToInclude = [
  ...globalCss,    // 1. ê¸€ë¡œë²Œ (Tailwind ê¸°ë³¸ê°’)
  ...perEntryCss   // 2. ìœ„ì ¯ë³„ (ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼)
];
```

**ì˜ˆì œ:**
```css
/* 1. src/index.css (ê¸€ë¡œë²Œ) */
.button {
  padding: 0.5rem 1rem;
  border-radius: 0.25rem;
}

/* 2. src/pizzaz/map.css (ìœ„ì ¯ë³„) */
.button {
  background-color: #F46C21;  /* ì˜¤ë²„ë¼ì´ë“œ */
}
```

ìµœì¢… ê²°ê³¼: ë²„íŠ¼ì´ ì£¼í™©ìƒ‰ ë°°ê²½

### 4.3 CSS ëª¨ë“ˆ ì œì™¸

```typescript
ignore: ["**/*.module.*"]
```

**CSS ëª¨ë“ˆì´ë€?**
- í´ë˜ìŠ¤ ì´ë¦„ì„ ìë™ìœ¼ë¡œ ê³ ìœ í•˜ê²Œ ë§Œë“¦
- ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

```css
/* styles.module.css */
.button { color: red; }

/* ë¹Œë“œ í›„ */
.button_abc123 { color: red; }
```

---

## 5. í•´ì‹±ê³¼ ìºì‹± ì „ëµ

### 5.1 íŒŒì¼ í•´ì‹±

**í•´ì‹±ì´ë€?**
- íŒŒì¼ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì§§ì€ ë¬¸ìì—´ ìƒì„±
- ë‚´ìš©ì´ ë°”ë€Œë©´ í•´ì‹œë„ ë°”ë€œ

**ì´ í”„ë¡œì íŠ¸ì˜ í•´ì‹± ë°©ì‹:**
```typescript
// package.json ë²„ì „ ê¸°ë°˜ í•´ì‹±
const h = crypto
  .createHash("sha256")
  .update(pkg.version, "utf8")  // "5.0.16"
  .digest("hex")
  .slice(0, 4);  // ì• 4ê¸€ìë§Œ

console.log(h);  // ì˜ˆ: "a1b2"
```

**íŒŒì¼ ì´ë¦„ ë³€ê²½:**
```typescript
for (const out of outputs) {
  const dir = path.dirname(out);
  const ext = path.extname(out);
  const base = path.basename(out, ext);

  const newName = path.join(dir, `${base}-${h}${ext}`);
  fs.renameSync(out, newName);
}
```

**ê²°ê³¼:**
```
assets/
â”œâ”€â”€ pizzaz-a1b2.js
â”œâ”€â”€ pizzaz-a1b2.css
â”œâ”€â”€ todo-a1b2.js
â””â”€â”€ todo-a1b2.css
```

### 5.2 ì™œ ë²„ì „ ê¸°ë°˜ í•´ì‹±ì¸ê°€?

**ì¼ë°˜ì ì¸ í•´ì‹± ë°©ì‹:**
```typescript
// íŒŒì¼ ë‚´ìš© ê¸°ë°˜ í•´ì‹±
const hash = crypto.createHash("md5")
  .update(fileContent)
  .digest("hex")
  .slice(0, 8);

// pizzaz-3f8a91c2.js
```

**ì¥ì :** íŒŒì¼ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ í•´ì‹œë„ ê°™ìŒ â†’ ìºì‹± íš¨ìœ¨ì 

**ì´ í”„ë¡œì íŠ¸ì˜ ë°©ì‹:**
```typescript
// ë²„ì „ ê¸°ë°˜ í•´ì‹±
const hash = crypto.createHash("sha256")
  .update("5.0.16")
  .digest("hex")
  .slice(0, 4);

// pizzaz-a1b2.js
```

**ì¥ì :**
- ëª¨ë“  ìœ„ì ¯ì˜ í•´ì‹œê°€ ê°™ìŒ â†’ ê´€ë¦¬ ì‰¬ì›€
- ë²„ì „ ì—…ë°ì´íŠ¸ ì‹œ ëª¨ë“  íŒŒì¼ ê°±ì‹ 

**ë²„ì „ ì—…ë°ì´íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:**
```
ë²„ì „ 5.0.16 â†’ 5.0.17

Before:
assets/
â”œâ”€â”€ pizzaz-a1b2.js
â”œâ”€â”€ todo-a1b2.js

After:
assets/
â”œâ”€â”€ pizzaz-c3d4.js    # ìƒˆ í•´ì‹œ
â”œâ”€â”€ todo-c3d4.js      # ìƒˆ í•´ì‹œ
```

### 5.3 HTML ìƒì„±

```typescript
const baseUrlRaw = process.env.BASE_URL || "http://localhost:4444";
const normalizedBaseUrl = baseUrlRaw.replace(/\/+$/, "");

for (const name of builtNames) {
  const html = `<!doctype html>
<html>
<head>
  <script type="module" src="${normalizedBaseUrl}/${name}.js"></script>
  <link rel="stylesheet" href="${normalizedBaseUrl}/${name}.css">
</head>
<body>
  <div id="${name}-root"></div>
</body>
</html>
`;

  // ë‘ ë²„ì „ ìƒì„±
  fs.writeFileSync(`assets/${name}-${h}.html`, html);  // í•´ì‹œ ë²„ì „
  fs.writeFileSync(`assets/${name}.html`, html);       // ì¼ë°˜ ë²„ì „
}
```

**ì™œ ë‘ ë²„ì „?**

1. **í•´ì‹œ ë²„ì „** (`pizzaz-a1b2.html`)
   - ë²„ì „ ê´€ë¦¬ìš©
   - êµ¬ë²„ì „ê³¼ ì‹ ë²„ì „ ê³µì¡´ ê°€ëŠ¥

2. **ì¼ë°˜ ë²„ì „** (`pizzaz.html`)
   - ê°„í¸í•œ ì ‘ê·¼
   - MCP ì„œë²„ì—ì„œ ì‚¬ìš©

### 5.4 BASE_URL í™˜ê²½ ë³€ìˆ˜

```bash
# ë¡œì»¬ ê°œë°œ
BASE_URL=http://localhost:4444 pnpm build

# í”„ë¡œë•ì…˜ ë°°í¬
BASE_URL=https://my-server.com pnpm build
```

**ìƒì„±ë˜ëŠ” HTML:**
```html
<!-- ë¡œì»¬ -->
<script type="module" src="http://localhost:4444/pizzaz.js"></script>

<!-- í”„ë¡œë•ì…˜ -->
<script type="module" src="https://my-server.com/pizzaz.js"></script>
```

**ì™œ í•„ìš”í•œê°€?**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ChatGPT               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ HTML ë¡œë“œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MCP ì„œë²„                  â”‚
â”‚    pizzaz.html ì œê³µ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ JS/CSS ë¡œë“œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ì •ì  íŒŒì¼ ì„œë²„            â”‚
â”‚    (BASE_URL)               â”‚
â”‚    pizzaz.js ì œê³µ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

MCP ì„œë²„ì™€ ì •ì  íŒŒì¼ ì„œë²„ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ!

---

## 6. ë¹Œë“œ ìµœì í™” ê¸°ë²•

### 6.1 Tree Shaking

**Tree Shakingì´ë€?**
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ ì œê±°
- ë²ˆë“¤ í¬ê¸° ì¤„ì´ê¸°

```javascript
// math.js
export function add(a, b) { return a + b; }
export function multiply(a, b) { return a * b; }
export function divide(a, b) { return a / b; }

// app.js
import { add } from './math.js';
console.log(add(1, 2));

// ë²ˆë“¤ ê²°ê³¼ (multiplyì™€ divide ì œê±°ë¨)
function add(a, b) { return a + b; }
console.log(add(1, 2));
```

**ì´ í”„ë¡œì íŠ¸ì˜ ì„¤ì •:**
```typescript
rollupOptions: {
  treeshake: true  // Tree shaking í™œì„±í™”
}
```

### 6.2 ì½”ë“œ ìµœì†Œí™” (Minification)

```typescript
build: {
  minify: "esbuild"
}
```

**ë³€í™˜ ì˜ˆì œ:**
```javascript
// ì›ë³¸
function calculateTotal(items) {
  let total = 0;
  for (const item of items) {
    total += item.price;
  }
  return total;
}

// ìµœì†Œí™” í›„
function calculateTotal(e){let t=0;for(const r of e)t+=r.price;return t}
```

**ìµœì í™” ê¸°ë²•:**
- ê³µë°± ì œê±°
- ë³€ìˆ˜ëª… ì§§ê²Œ
- ì£¼ì„ ì œê±°
- ë¶ˆí•„ìš”í•œ ì„¸ë¯¸ì½œë¡  ì œê±°

### 6.3 ì†ŒìŠ¤ë§µ

```typescript
build: {
  sourcemap: true
}
```

**ì†ŒìŠ¤ë§µì´ë€?**
- ìµœì†Œí™”ëœ ì½”ë“œ â†” ì›ë³¸ ì½”ë“œ ë§¤í•‘ ì •ë³´
- ë””ë²„ê¹…ì— í•„ìˆ˜!

**íŒŒì¼ ìƒì„±:**
```
assets/
â”œâ”€â”€ pizzaz-a1b2.js
â””â”€â”€ pizzaz-a1b2.js.map  # ì†ŒìŠ¤ë§µ
```

**ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬:**
```
âŒ ì†ŒìŠ¤ë§µ ì—†ìŒ:
   calculateTotal(e){let t=0;...}
   â†‘ ì´ ì½”ë“œ ì–´ë””ì„œ ì™”ëŠ”ì§€ ëª¨ë¦„

âœ… ì†ŒìŠ¤ë§µ ìˆìŒ:
   src/pizzaz/utils.js:15
   function calculateTotal(items) {
   â†‘ ì›ë³¸ ì½”ë“œ ìœ„ì¹˜ í‘œì‹œ
```

### 6.4 ì²­í¬ ì „ëµ

```typescript
rollupOptions: {
  output: {
    inlineDynamicImports: true
  }
}
```

**ì¼ë°˜ì ì¸ ì²­í¬ ì „ëµ:**
```
main.js        (ì•± ì½”ë“œ)
vendor.js      (React ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬)
chunk-abc.js   (ë™ì  import)
```

**ì´ í”„ë¡œì íŠ¸ì˜ ì „ëµ:**
```
pizzaz.js      (ëª¨ë“  ì½”ë“œë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ)
```

**ì™œ í•˜ë‚˜ë¡œ í•©ì¹˜ë‚˜?**
- ìœ„ì ¯ì´ **ë…ë¦½ì **ì´ì–´ì•¼ í•¨
- ì—¬ëŸ¬ íŒŒì¼ â†’ ë¡œë”© ë³µì¡
- ë‹¨ì¼ íŒŒì¼ â†’ ê°„ë‹¨í•œ ë°°í¬

---

## 7. ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 7.1 ì¼ë°˜ì ì¸ ê°œë°œ íë¦„

```bash
# 1. í”„ë¡œì íŠ¸ í´ë¡  ë° ì„¤ì¹˜
git clone <repo>
pnpm install

# 2. ê°œë°œ ì„œë²„ ì‹œì‘
pnpm dev
# â†’ http://localhost:4444 ì ‘ì†

# 3. ì½”ë“œ ìˆ˜ì •
# â†’ HMRë¡œ ìë™ ë¦¬ë¡œë“œ

# 4. ë¹Œë“œ
pnpm build
# â†’ assets/ í´ë”ì— íŒŒì¼ ìƒì„±

# 5. ë¹Œë“œ ê²°ê³¼ í™•ì¸
pnpm serve
# â†’ http://localhost:4444 ì ‘ì†
```

### 7.2 ìƒˆ ìœ„ì ¯ ì¶”ê°€í•˜ê¸°

```bash
# 1. ë””ë ‰í† ë¦¬ ìƒì„±
mkdir src/my-widget

# 2. index.jsx ìƒì„±
cat > src/my-widget/index.jsx << 'EOF'
import { createRoot } from 'react-dom/client';

function MyWidget() {
  return <div>Hello, Widget!</div>;
}

createRoot(document.getElementById('my-widget-root')).render(<MyWidget />);
EOF

# 3. ê°œë°œ ì„œë²„ ì¬ì‹œì‘
# (ìë™ìœ¼ë¡œ ì¸ì‹ë¨)

# 4. ì ‘ì†
# http://localhost:4444/my-widget.html
```

**ì„¤ì • íŒŒì¼ ìˆ˜ì • ë¶ˆí•„ìš”!** ìë™ìœ¼ë¡œ ì¸ì‹ë©ë‹ˆë‹¤.

### 7.3 ë””ë²„ê¹… íŒ

**1. ê°œë°œ ì„œë²„ ë¡œê·¸ í™•ì¸**
```bash
pnpm dev

# ì¶œë ¥:
# Dev endpoints:
#   /pizzaz.html, /pizzaz.js, /pizzaz.css
#   /todo.html, /todo.js, /todo.css
```

**2. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬**
```
F12 â†’ Sources íƒ­
â””â”€ src/
   â””â”€ pizzaz/
      â””â”€ index.jsx  (ì›ë³¸ ì½”ë“œ ë³´ì„)
```

**3. ë¹Œë“œ ì˜¤ë¥˜ í™•ì¸**
```bash
pnpm build

# ì˜¤ë¥˜ ì˜ˆì‹œ:
# [vite]: Rollup failed to resolve import "non-existent"
# src/pizzaz/index.jsx (3:0)
```

**4. CSS ë””ë²„ê¹…**
```jsx
// ì„ì‹œë¡œ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì‚¬ìš©
<div style={{ border: "1px solid red" }}>
  ë””ë²„ê¹… ì¤‘
</div>
```

---

## ğŸ’¡ í•µì‹¬ ìš”ì•½

### Vite ë¹Œë“œ ì‹œìŠ¤í…œ
- **ê°œë°œ ëª¨ë“œ**: ë¹ ë¥¸ ì‹œì‘, HMR
- **í”„ë¡œë•ì…˜ ëª¨ë“œ**: ìµœì í™”ëœ ë²ˆë“¤
- **ES ëª¨ë“ˆ**: ë„¤ì´í‹°ë¸Œ ì§€ì›

### ê°œë°œ ì„œë²„ (vite.config.mts)
- **ìë™ ë°œê²¬**: `src/**/index.{tsx,jsx}` ìŠ¤ìº”
- **ê°€ìƒ ëª¨ë“ˆ**: ë™ì ìœ¼ë¡œ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ìƒì„±
- **CSS ìˆ˜ì§‘**: ê¸€ë¡œë²Œ + ìœ„ì ¯ë³„ ìë™ ìˆ˜ì§‘
- **ë¯¸ë“¤ì›¨ì–´**: ì»¤ìŠ¤í…€ HTML ì œê³µ

### í”„ë¡œë•ì…˜ ë¹Œë“œ (build-all.mts)
- **ë…ë¦½ ë²ˆë“¤**: ê° ìœ„ì ¯ì´ ì™„ì „íˆ ë¶„ë¦¬
- **CSS ì¸ë¼ì¸**: í•˜ë‚˜ì˜ CSS íŒŒì¼ë¡œ í†µí•©
- **í•´ì‹±**: package.json ë²„ì „ ê¸°ë°˜
- **HTML ìƒì„±**: BASE_URL ë°˜ì˜

### ìµœì í™”
- **Tree Shaking**: ë¯¸ì‚¬ìš© ì½”ë“œ ì œê±°
- **Minification**: ì½”ë“œ ì••ì¶•
- **Single Bundle**: ëª¨ë“  ì½”ë“œë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ
- **Sourcemap**: ë””ë²„ê¹… ì§€ì›

### ê°œë°œ ì›Œí¬í”Œë¡œìš°
1. `pnpm dev` - ê°œë°œ ì„œë²„ ì‹œì‘
2. ì½”ë“œ ìˆ˜ì • - HMR ìë™ ì ìš©
3. `pnpm build` - í”„ë¡œë•ì…˜ ë¹Œë“œ
4. `pnpm serve` - ë¹Œë“œ ê²°ê³¼ í™•ì¸

---

**3ë¶€ ì™„ë£Œ!** ë‹¤ìŒì€ 4ë¶€ "ìœ„ì ¯ êµ¬í˜„ ìƒì„¸ ë¶„ì„"ì…ë‹ˆë‹¤. ì¤€ë¹„ë˜ë©´ ìš”ì²­í•´ì£¼ì„¸ìš”! ğŸš€
